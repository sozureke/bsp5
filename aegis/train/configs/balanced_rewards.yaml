env:
  num_survivors: 4
  num_impostors: 2
  num_rooms: 9
  evac_room: 4
  vision_radius: 2
  tasks_per_survivor: 4
  task_ticks_single: 5
  task_ticks_two_step: 3
  two_step_task_probability: 0.3
  kill_cooldown: 25
  door_close_duration: 15
  door_cooldown: 40
  protect_evac_door: true
  meeting_discussion_ticks: 60
  meeting_voting_ticks: 30
  evac_ticks_required: 5
  max_ticks: 400
  enable_knower: false
  max_messages_per_meeting: 10
  comm_mode: broadcast
  memory_mode: none

rewards:
  win: 1.0
  loss: -1.0
  task_step: 0.05
  correct_report: 0.1
  impostor_ejected_survivor: 0.15
  survivor_ejected_survivor: -0.15
  kill: 0.15
  impostor_ejected_impostor: -0.2
  survivor_ejected_impostor: 0.1
  time_penalty: -0.0001
  proximity_penalty: -0.003
  proximity_penalty_ticks: 1
  
  survivor:
    win: 1.5
    task_step: 0.2
    death: -0.4
    ejection_bonus: 0.25
    ejection_penalty: -0.15
  
  impostor:
    win: 0.5  # Reduced - win should be supplementary, not dominant
    kill: 1.0
    kill_witness_penalty: -0.3  # Penalty per witness when killing
    kill_early_penalty: -0.2  # Penalty for killing early in episode (<20%)
    proximity_penalty: -0.05  # Penalty for being near 2+ survivors
    suspicious_penalty: -0.1  # Penalty for being near fresh bodies
    ejected: -2.0
    ejection_bonus: 0.3
    ejection_penalty: -0.5

training:
  algorithm: PPO
  device: auto
  num_workers: 1
  num_envs_per_worker: 1
  train_batch_size: 1000
  sgd_minibatch_size: 64
  num_sgd_iter: 5
  rollout_steps: 128
  num_minibatches: 4
  lr: 0.0003
  entropy_coeff: 0.01
  clip_param: 0.2
  clip_vloss: true
  vf_coef: 0.5
  max_grad_norm: 0.5
  gamma: 0.99
  lambda_: 0.95
  model:
    fcnet_hiddens: [256, 256]
    fcnet_activation: relu
    use_lstm: false
    lstm_cell_size: 256
    max_seq_len: 20
  total_timesteps: 1000000
  checkpoint_timesteps: 100000
  evaluation_interval: 25
  evaluation_num_episodes: 10

logging:
  use_wandb: false
  wandb_project: aegis
  wandb_entity: null
  log_level: INFO
  log_interval: 10
  checkpoint_dir: ./checkpoints
  debug_rewards: true
  debug_rewards_interval: 10

ablations:
  disable_communication: false
  disable_doors: false
  random_impostor: false

